<!DOCTYPE html>
<html>
<head>
  <title>GIO.G</title>

  <link rel="stylesheet" href="/static/vendor/nouislider@15.7.1/nouislider.min.css">
  <link rel="stylesheet" href="/static/css/styles.css">

  <script type="text/javascript" src="/static/vendor/konva@9.3.6/konva.min.js"></script>
  <script type="text/javascript" src="/static/vendor/tinyqueue@2.0.3/tinyqueue.min.js"></script>
  <script type="text/javascript" src="/static/vendor/polylabel@1.1.0/polylabel.js"></script>
  <script type="text/javascript" src="/static/vendor/nouislider@15.7.1/nouislider.min.js"></script>

</head>
<body>

<div id="navbar">

  <div id="navbar-admt-container">
    <div id="navbar-logos">
      <a href="https://db.cs.pitt.edu/"><img src="/static/assets/logos/admt.png" width="50" height="50" alt=""></a>
      <img src="/static/assets/logos/pitt.png" width="48" height="48" alt="">
    </div>
    <div id="navbar-admt-text">
      <span id="navbar-admt-title" class="navbar-text">ADMT Lab</span>
      <span id="navbar-copyright-text" class="navbar-text">Copyright Â© 2024</span>
    </div>
  </div>
  <div id="navbar-title-container" class="navbar-text"> 
    <div id="navbar-title-name">GIO.G</div>
    <div id="navbar-title-separator">:</div>
    <div id="navbar-title-expanded">Generator for Indoor-Outdoor Graphs</div>
  </div>
</div>

<div id="page">
  <div id="left-sidebar">

    <button class="accordion-button title accordion-active">Graph Generator</button>
    <div class="options-section">
      <div class="options-section-inner-container">
      <div id="config-form-container" class="options-form-container">

        <div class="options-category-container">
          <div class="subsubtitle">Number of Buildings:</div>
          <div class="options-input-container">
            <input type="text" id="num-buildings-input" name="num_buildings" required minlength="1" maxlength="8" size="10" value="25" placeholder="e.g. 25"
              oninput="this.value = this.value.replace(/\D/g, '');"/>
          </div>
        </div>

        <div class="options-category-container">
          <div class="subsubtitle">Grid Coverage:</div>
          <div class="options-input-container">
            <div class="options-slider-container">
              <input class="options-slider" type="range" id="coverage-input" name="coverage" min="0" max="1" step="0.01" value="0.75"/>
              <span id="coverage-value" class="options-slider-value"></span>
            </div>
          </div>
        </div>

        <div class="options-category-container">
          <div class="subsubtitle">Building Clustering:</div>
          <div class="options-input-container">
            <div class="options-slider-container">
              <input class="options-slider" type="range" id="clustering-input" name="clustering" min="0" max="0.5" step="0.01" value="0"/>
              <span id="clustering-value" class="options-slider-value"></span>
            </div>
          </div>
        </div>

        <div class="options-category-container">
          <span class="subsubtitle">Constant Congestion:</span>
          <span class="options-input-container">
            <span class="options-short-group">
              <input type="checkbox" id="constant-congestion-input" name="constant_con"/>
              <label for="constant-congestion-input">Enabled</label>
            </span>
          </span>
        </div>

        <div class="options-category-container">
          <div id="congestion-slider-label" class="subsubtitle">Congestion Levels:</div>
          
          <div class="options-input-container">
            <div id="congestion-slider-container">
              <div id="congestion-slider" disabled></div>
            </div>
            <div id="congestion-labels-values-container">
              <div class="congestion-value-container">
                <span>Low Congestion:</span>
                <span id="low-con-value" class="low-con-text-color"></span>
              </div>
              <div class="congestion-value-container">
                <span>Medium Congestion:</span>
                <span id="med-con-value" class="med-con-text-color"></span>
              </div>
              <div class="congestion-value-container">
                <span>High Congestion:</span>
                <span id="high-con-value" class="high-con-text-color"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="options-category-container">
          <button type="button" onclick="submit_config_form()">Submit</button>
        </div>
      </div>
      </div>
    </div>

    <button class="accordion-button title accordion-active">Path Recommendation</button>
    <div class="options-section">
      <div class="options-section-inner-container">
        <div id="path-gen-form-container" class="options-form-container">

          <div class="options-category-container">
            <div class="subsubtitle">Algorithms:</div>
            <div class="options-input-container">
              <input type="checkbox" id="path-gen-astro-cb" value="astro" checked>
              <label for="path-gen-astro-cb">Astro</label>
              <br>
              <input type="checkbox" id="path-gen-astrog-cb" value="astroG">
              <label for="path-gen-astrog-cb">Astro-Greedy</label>
              <br>
              <input type="checkbox" id="path-gen-dijkstra-cb" value="dijkstra">
              <label for="path-gen-dijkstra-cb">Dijkstra</label>
              <br>
              <input type="checkbox" id="path-gen-dijkstra-con-cb" value="dijkstraC">
              <label for="path-gen-dijkstra-con-cb">Dijkstra-Congestion</label>
              <br>
              <input type="checkbox" id="path-gen-greedy-cb" value="greedy">
              <label for="path-gen-greedy-cb">Greedy</label>
            </div>
          </div>  

          <div class="options-category-container">
            <span class="subsubtitle">Usable Doors:</span>
            <span class="options-input-container">
              <span class="options-short-group">
                <input type="radio" id="standard-input" name="accessibility-type" value="standard" checked>
                <label for="standard-input">All</label>
              </span>
              <span class="options-short-group">
                <input type="radio" id="accessibility-input" name="accessibility-type" value="accessible">
                <label for="accessibility-input">Accessible</label>
              </span>
            </span>
          </div>

          <div class="options-category-container">
            <span class="subsubtitle">Points:</span>
            <div class="options-input-container">
              <button id="select-path-start-button" type="button" onclick="handle_select_start_building_button()">Select Start Point</button>
              <span class="subsubtitle">Selected Point:</span>
              <span id="path-start-building-info"></span>
            </div>
            <div class="options-input-container">
              <button id="select-path-end-button" type="button" onclick="handle_select_end_building_button()">Select End Point</button>
              <span class="subsubtitle">Selected Point:</span>
              <span id="path-end-building-info"></span>
            </div>
          </div>
          
          <div class="options-category-container">
            <button type="button" onclick="submit_path_gen_form()">Submit</button>
          </div>
        </div>
      </div>
    </div>

    <button class="accordion-button title">Manage Graph Data</button>
    <div class="options-section">
      <div class="options-section-inner-container">
        <div class="options-form-container">
          <div class="options-category-container">
            <div class="subsubtitle">Select Graph Preset:</div>
            <div class="options-input-container">
              <select id="preset-graph-select-input">
                <option value="" selected disabled hidden>Select Preset</option>
                <option value="graph_25_0.75.json">graph_25_0.75.json</option>
                <option value="graph_50_0.75.json">graph_50_0.75.json</option>
                <option value="graph_100_0.75.json">graph_100_0.75.json</option>
                <option value="graph_example_paths.json">graph_example_paths.json</option>
              </select>
            </div>
            <div class="options-input-container">
              <button type="button" onclick="submit_load_graph_preset()">Submit</button>
            </div>
          </div>

          <div class="options-category-container">
            <div class="subsubtitle">Import Graph:</div>
            <div class="options-input-container">
              <input id="import-graph-input" type="file"/>
            </div>
            <div class="options-input-container">
              <button type="button" onclick="submit_uploaded_graph()">Submit</button>
            </div>
          </div>

          <div class="options-category-container">
            <div class="subsubtitle">Export Graph:</div>
            <div class="options-input-container">
              <button type="button" onclick="download_graph_export()">Download</button>
              <span class="options-short-group">
                <input type="checkbox" id="export-pretty-cb">
                <label for="export-pretty-cb">Prettify</label>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <button class="accordion-button title">Display Options</button>
    <div class="options-section">
      <div class="options-section-inner-container">
        <div class="options-form-container">
          
          <div class="options-category-container" id="display-options-buttons-container">
            <button type="button" onclick="handle_buildings_visible_button()">Toggle Buildings</button>
            <button type="button" onclick="handle_corridors_visible_button()">Toggle Corridors</button>
            <button type="button" onclick="handle_paths_visible_button()">Toggle Paths</button>
            <button type="button" onclick="handle_roads_visible_button()">Toggle Roads</button>
            <button type="button" onclick="handle_congestion_colors_button()">Toggle Congestion Colors</button>
            <button type="button" onclick="handle_cell_highlights_visible_button()">Toggle Selection Highlight</button>
            <button type="button" onclick="handle_path_endpoint_visibility_button()">Toggle Path Endpoints</button>
            <button type="button" onclick="handle_legend_visible_button()">Toggle Path Legend</button>
          </div>
        </div>     
      </div>   
    </div>

    <button class="accordion-button title">Dev Options</button>
    <div class="options-section">
      <div class="options-section-inner-container">
        <div class="options-form-container">

          <div class="options-category-container">
            <button type="button" onclick="draw_manual_paths()">Test Path Drawing</button>
          </div>

          <div class="options-category-container">
            <button type="button" onclick="handle_clipping_visible_button()">Toggle Building Clipping</button>
          </div>

          <div class="options-category-container">
            <button type="button" onclick="handle_road_hiding_button()">Toggle Road Hiding</button>
          </div>
          <div class="options-category-container">
            <button type="button" onclick="handle_panning_toggle_button()">Toggle Panning</button>
          </div>
          <div class="options-category-container">
            <button type="button" onclick="handle_zooming_toggle_button()">Toggle Zooming</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div id="graph-stage-container">
    
    <div id="graph-stage"></div>

    <div id="graph-legend">
      <div id="graph-legend-title">Path Legend</div>
      <div id="graph-legend-display-title">Display</div>
      <div id="graph-legend-list">
          <div class="graph-legend-item">
            <span class="graph-legend-item-name">Astro</span>
            <span id="solid-line" class="graph-legend-line"></span>
            <span class="options-short-group graph-legend-item-cb-container">
              <input type="checkbox" id="legend-display-astro-cb" checked>
            </span>
          </div>
          <div class="graph-legend-item">
            <span class="graph-legend-item-name">Astro-Greedy</span>
            <span id="dashed-line" class="graph-legend-line"></span>
            <span class="options-short-group graph-legend-item-cb-container">
              <input type="checkbox" id="legend-display-astrog-cb" checked>
            </span>
          </div>
          <div class="graph-legend-item">
            <span class="graph-legend-item-name">Dijkstra</span>
            <span id="dotted-line" class="graph-legend-line"></span>
            <span class="options-short-group graph-legend-item-cb-container">
              <input type="checkbox" id="legend-display-dijkstra-cb" checked>
            </span>
          </div>
          <div class="graph-legend-item">
            <span class="graph-legend-item-name">Dijkstra-Congestion</span>
            <span id="dotdashed-line" class="graph-legend-line"></span>
            <span class="options-short-group graph-legend-item-cb-container">
              <input type="checkbox" id="legend-display-dijkstra-con-cb" checked>
            </span>
          </div>
          <div class="graph-legend-item">
            <span class="graph-legend-item-name">Greedy</span>
            <span id="longdashed-line" class="graph-legend-line"></span>
            <span class="options-short-group graph-legend-item-cb-container">
              <input type="checkbox" id="legend-display-greedy-cb" checked>
            </span>
          </div>
      </div>
    </div>
  </div>

  <div id="right-sidebar">

    <div id="right-sidebar-navbar">
      <div id="navbar-building-editor-button" class="navbar-item navbar-item-active" onclick="handle_building_editor_nav_button()">Building Editor</div>
      <div class="navbar-separator"></div>
      <div id="navbar-path-stats-button" class="navbar-item" onclick="handle_path_stats_nav_button()">Path Statistics</div>
    </div>

    <div id="right-sidebar-content">
      
      <div id="building-editor-container"> 
        <div class="building-editor-section">
          <div class="title">Building Editor</div>
          <div id="building-editor-stage-container">
            <div id="building-editor-stage"></div>
          </div>
        </div>

        <div id="selected-cell-info-controls-container" class="building-editor-section">
          <div id="selected-cell-info-text-container"></div>
          <div id="selected-building-actions-container"></div>
        </div>

        <div id="selected-building-options-container" class="building-editor-section"></div>
        <div id="selected-building-doors-container" class="building-editor-section"></div>
      </div>

      <div id="path-stats-container"> 
      
        <div class="title">Path Statistics</div>

      </div>
    </div>
  </div>
</div>
  
<script type="text/javascript" src="static/js/script.js"></script>
</body>
</html> 


